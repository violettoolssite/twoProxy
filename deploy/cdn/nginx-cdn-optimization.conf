# Nginx CDN 优化配置
# 添加到 /etc/nginx/sites-enabled/mirror.conf

# ========= 静态资源缓存头 =========
location ^~ /css/ {
    access_log off;
    expires 7d;
    add_header Cache-Control "public, max-age=604800";
    add_header CDN-Cache-Control "public, max-age=604800";
    try_files $uri =404;
}

location ^~ /js/ {
    access_log off;
    expires 7d;
    add_header Cache-Control "public, max-age=604800";
    add_header CDN-Cache-Control "public, max-age=604800";
    try_files $uri =404;
}

# ========= API 请求不缓存 =========
location ^~ /api/ {
    add_header Cache-Control "no-store, no-cache, must-revalidate, private";
    add_header Pragma "no-cache";
    add_header Expires "0";
    proxy_pass http://127.0.0.1:3000;
    # ... 其他代理配置
}

# ========= 代理请求不缓存 =========
location ~ ^/(gh|v2|file)/ {
    add_header Cache-Control "no-store, no-cache, must-revalidate, private";
    add_header Pragma "no-cache";
    add_header Expires "0";
    # ... 代理配置
}
